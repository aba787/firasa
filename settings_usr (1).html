
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

<!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
<header class="bg-indigo-700 text-white p-4 flex justify-between items-center">
  <h1 class="text-xl font-bold">ğŸ“Š ÙØ±Ø§Ø³Ø© - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
  <div class="flex items-center space-x-4 space-x-reverse">
    <span class="mr-4">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <strong id="headerUserName">Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ</strong></span>
    <button onclick="refreshSettings()" class="bg-indigo-600 hover:bg-indigo-800 px-3 py-1 rounded text-sm transition-colors">
      ğŸ”„ ØªØ­Ø¯ÙŠØ«
    </button>
  </div>
</header>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
<div class="max-w-7xl mx-auto p-6 grid grid-cols-1 md:grid-cols-4 gap-6">

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <aside class="bg-white shadow rounded-xl p-4 col-span-1">
    <ul class="space-y-4">
      <li><a href="Dashboard.html" class="block text-gray-700 hover:text-indigo-600 transition-colors">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a href="add-operation.html" class="block text-gray-700 hover:text-indigo-600 transition-colors">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ©</a></li>
      <li><a href="reports_usr.html" class="block text-gray-700 hover:text-indigo-600 transition-colors">ğŸ“‘ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a></li>
      <li><a href="alerts_usr.html" class="block text-gray-700 hover:text-indigo-600 transition-colors">âš ï¸ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</a></li>
      <li><a href="accounts_lm.html" class="block text-gray-700 hover:text-indigo-600 transition-colors">ğŸ’³ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©</a></li>
      <li><a href="settings_usr.html" class="block text-indigo-600 hover:text-indigo-800 font-bold bg-indigo-50 px-3 py-2 rounded-lg">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
    </ul>
  </aside>

  <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© -->
  <main class="col-span-3 space-y-6">

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ‘¤</span>
        Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
      </h2>
      
      <form id="profileForm" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input type="text" id="fullName" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" id="email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="example@email.com" required>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
            <input type="tel" id="phone" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="+966 50 123 4567">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
            <input type="text" id="jobTitle" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ù…Ø¯ÙŠØ± Ù…Ø§Ù„ÙŠ">
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø´Ø±ÙƒØ©/Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</label>
          <input type="text" id="company" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©">
        </div>
        
        <button type="submit" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition duration-200">
          ğŸ’¾ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        </button>
      </form>
    </div>

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ”’</span>
        Ø§Ù„Ø£Ù…Ø§Ù† ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
      </h2>
      
      <form id="securityForm" class="space-y-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
          <input type="password" id="currentPassword" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©">
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input type="password" id="newPassword" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
            <div class="mt-2 text-xs text-gray-500">
              ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ø¹ Ø£Ø±Ù‚Ø§Ù… ÙˆØ±Ù…ÙˆØ²
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input type="password" id="confirmPassword" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
          </div>
        </div>
        
        <!-- Ù…Ø¤Ø´Ø± Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
        <div id="passwordStrength" class="hidden">
          <div class="text-sm text-gray-700 mb-2">Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div id="strengthBar" class="bg-red-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
          </div>
          <div id="strengthText" class="text-xs mt-1"></div>
        </div>
        
        <div class="bg-blue-50 p-4 rounded-lg">
          <h4 class="font-semibold text-blue-800 mb-2">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</h4>
          <div class="space-y-3">
            <label class="flex items-center">
              <input type="checkbox" id="twoFactorAuth" class="ml-2">
              <span class="text-sm">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© (2FA)</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="loginNotifications" class="ml-2" checked>
              <span class="text-sm">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="sessionTimeout" class="ml-2" checked>
              <span class="text-sm">Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ø¹Ø¯Ù… Ù†Ø´Ø§Ø·</span>
            </label>
          </div>
        </div>
        
        <button type="submit" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
          ğŸ” ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
        </button>
      </form>
    </div>

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ””</span>
        Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
          <div class="space-y-3">
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø±ØµÙŠØ¯</span>
              <input type="checkbox" id="lowBalanceAlert" class="toggle-switch" checked>
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</span>
              <input type="checkbox" id="highExpenseAlert" class="toggle-switch" checked>
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
              <input type="checkbox" id="lowRevenueAlert" class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</span>
              <input type="checkbox" id="budgetExceedAlert" class="toggle-switch" checked>
            </label>
          </div>
        </div>
        
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
          <div class="space-y-3">
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</span>
              <input type="checkbox" id="systemUpdates" class="toggle-switch" checked>
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±ÙŠØ©</span>
              <input type="checkbox" id="periodicReports" class="toggle-switch" checked>
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</span>
              <input type="checkbox" id="securityNotifications" class="toggle-switch" checked>
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm">Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</span>
              <input type="checkbox" id="usageTips" class="toggle-switch">
            </label>
          </div>
        </div>
      </div>
      
      <div class="mt-6 bg-gray-50 p-4 rounded-lg">
        <h4 class="font-semibold text-gray-700 mb-3">ØªØ®ØµÙŠØµ Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h4>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="block text-sm text-gray-600 mb-1">Ø­Ø¯ Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø±ØµÙŠØ¯ (Ø±.Ø³)</label>
            <input type="number" id="lowBalanceThreshold" class="w-full p-2 border rounded" value="1000" min="0">
          </div>
          <div>
            <label class="block text-sm text-gray-600 mb-1">Ø­Ø¯ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (%)</label>
            <input type="number" id="expenseThreshold" class="w-full p-2 border rounded" value="20" min="0" max="100">
          </div>
          <div>
            <label class="block text-sm text-gray-600 mb-1">ØªÙƒØ±Ø§Ø± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</label>
            <select id="reportFrequency" class="w-full p-2 border rounded">
              <option value="daily">ÙŠÙˆÙ…ÙŠ</option>
              <option value="weekly" selected>Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>
              <option value="monthly">Ø´Ù‡Ø±ÙŠ</option>
            </select>
          </div>
        </div>
      </div>
      
      <button onclick="saveNotificationSettings()" class="mt-6 bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 transition duration-200">
        ğŸ”” Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
      </button>
    </div>

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„ØªØ®ØµÙŠØµ -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ¨</span>
        Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„ØªØ®ØµÙŠØµ
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¹Ø§Ù…</h3>
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-gray-600 mb-2">Ù†Ù…Ø· Ø§Ù„Ø£Ù„ÙˆØ§Ù†</label>
              <select id="colorScheme" class="w-full p-3 border rounded-lg">
                <option value="default">Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø£Ø²Ø±Ù‚)</option>
                <option value="green">Ø£Ø®Ø¶Ø±</option>
                <option value="purple">Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
                <option value="red">Ø£Ø­Ù…Ø±</option>
                <option value="dark">Ø¯Ø§ÙƒÙ†</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-gray-600 mb-2">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
              <select id="fontSize" class="w-full p-3 border rounded-lg">
                <option value="small">ØµØºÙŠØ±</option>
                <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                <option value="large">ÙƒØ¨ÙŠØ±</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-gray-600 mb-2">Ø§Ù„ÙˆØ¶Ø¹</label>
              <select id="displayMode" class="w-full p-3 border rounded-lg">
                <option value="light" selected>ÙØ§ØªØ­</option>
                <option value="dark">Ø¯Ø§ÙƒÙ†</option>
                <option value="auto">ØªÙ„Ù‚Ø§Ø¦ÙŠ</option>
              </select>
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
          <div class="space-y-4">
            <label class="flex items-center">
              <input type="checkbox" id="showWelcomeMessage" class="ml-2" checked>
              <span class="text-sm">Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="showQuickStats" class="ml-2" checked>
              <span class="text-sm">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="showRecentActivity" class="ml-2" checked>
              <span class="text-sm">Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="compactView" class="ml-2">
              <span class="text-sm">Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¶ØºÙˆØ·</span>
            </label>
          </div>
          
          <div class="mt-4">
            <label class="block text-sm text-gray-600 mb-2">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</label>
            <select id="itemsPerPage" class="w-full p-3 border rounded-lg">
              <option value="10">10</option>
              <option value="25" selected>25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
        </div>
      </div>
      
      <button onclick="saveDisplaySettings()" class="mt-6 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200">
        ğŸ¨ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶
      </button>
    </div>

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ’¾</span>
        Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
          <div class="space-y-3">
            <button onclick="exportData('operations')" class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition duration-200">
              ğŸ“Š ØªØµØ¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            </button>
            <button onclick="exportData('accounts')" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition duration-200">
              ğŸ’³ ØªØµØ¯ÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©
            </button>
            <button onclick="exportData('all')" class="w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition duration-200">
              ğŸ—„ï¸ ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
          </div>
        </div>
        
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>
          <div class="space-y-4">
            <label class="flex items-center">
              <input type="checkbox" id="autoBackup" class="ml-2" checked>
              <span class="text-sm">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
            </label>
            <div>
              <label class="block text-sm text-gray-600 mb-2">ØªÙƒØ±Ø§Ø± Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</label>
              <select id="backupFrequency" class="w-full p-3 border rounded-lg">
                <option value="daily" selected>ÙŠÙˆÙ…ÙŠ</option>
                <option value="weekly">Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>
                <option value="monthly">Ø´Ù‡Ø±ÙŠ</option>
              </select>
            </div>
            <button onclick="createBackup()" class="w-full bg-orange-600 text-white p-3 rounded-lg hover:bg-orange-700 transition duration-200">
              ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„Ø¢Ù†
            </button>
          </div>
        </div>
      </div>
      
      <div class="mt-6 bg-red-50 p-4 rounded-lg border border-red-200">
        <h4 class="font-semibold text-red-700 mb-3">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
        <p class="text-sm text-red-600 mb-3">ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!</p>
        <button onclick="resetAllData()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition duration-200">
          ğŸ—‘ï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        </button>
      </div>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø­Ø³Ø§Ø¨ -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">â„¹ï¸</span>
        Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø­Ø³Ø§Ø¨
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3>
          <div class="space-y-3">
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨:</span>
              <span id="accountCreated" class="text-sm font-medium">--</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:</span>
              <span id="lastLogin" class="text-sm font-medium">--</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©:</span>
              <span id="totalOperations" class="text-sm font-medium">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©:</span>
              <span id="totalAccounts" class="text-sm font-medium">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:</span>
              <span id="dataUsage" class="text-sm font-medium">--</span>
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-semibold text-gray-700 mb-4">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
          <div class="space-y-3">
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…:</span>
              <span class="text-sm font-medium">v2.1.0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</span>
              <span class="text-sm font-medium">15 ÙŠÙ†Ø§ÙŠØ± 2025</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø§Ù„Ù…ØªØµÙØ­:</span>
              <span id="browserInfo" class="text-sm font-medium">--</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm text-gray-600">Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</span>
              <span class="text-sm font-medium text-green-600">Ù…ØªØµÙ„</span>
            </div>
          </div>
          
          <div class="mt-4">
            <button onclick="checkForUpdates()" class="w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition duration-200">
              ğŸ”„ ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ -->
    <div class="bg-white p-6 rounded-xl shadow">
      <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <span class="text-2xl ml-3">ğŸ”§</span>
        Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <button onclick="downloadUserData()" class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition duration-200 text-center">
          <div class="text-2xl mb-2">ğŸ“¥</div>
          <div class="text-sm font-medium">ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ</div>
        </button>
        
        <button onclick="contactSupport()" class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition duration-200 text-center">
          <div class="text-2xl mb-2">ğŸ’¬</div>
          <div class="text-sm font-medium">Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù…</div>
        </button>
        
        <button onclick="logout()" class="bg-red-600 text-white p-4 rounded-lg hover:bg-red-700 transition duration-200 text-center">
          <div class="text-2xl mb-2">ğŸšª</div>
          <div class="text-sm font-medium">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
        </button>
      </div>
    </div>

  </main>

</div>

<!-- Loading overlay -->
<div id="loadingOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg flex items-center space-x-3 space-x-reverse">
    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"></div>
    <span class="text-gray-700">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
  </div>
</div>

<!-- Confirmation Modal -->
<div id="confirmModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-xl max-w-md w-full mx-4">
    <h3 class="text-lg font-bold mb-4" id="confirmTitle">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h3>
    <p class="text-gray-600 mb-6" id="confirmMessage">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ØŸ</p>
    <div class="flex space-x-3 space-x-reverse">
      <button id="confirmButton" class="flex-1 bg-red-600 text-white p-3 rounded-lg hover:bg-red-700">
        ØªØ£ÙƒÙŠØ¯
      </button>
      <button onclick="closeConfirmModal()" class="flex-1 bg-gray-500 text-white p-3 rounded-lg hover:bg-gray-600">
        Ø¥Ù„ØºØ§Ø¡
      </button>
    </div>
  </div>
</div>

<script>
// Global variables
let userSettings = {};
let userProfile = {};

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadUserData();
    loadUserSettings();
    updateSystemInfo();
    setupEventListeners();
    setupPasswordStrengthChecker();
    loadUsageStatistics();
});

// Load user data and profile
function loadUserData() {
    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    
    if (userData.fullname) {
        document.getElementById('headerUserName').textContent = userData.fullname;
        document.getElementById('fullName').value = userData.fullname;
    }
    
    if (userData.email) {
        document.getElementById('email').value = userData.email;
    }
    
    // Load additional profile data
    const profileData = JSON.parse(localStorage.getItem(`profile_${userData.email || 'default'}`) || '{}');
    userProfile = { ...userData, ...profileData };
    
    // Populate form fields
    document.getElementById('phone').value = userProfile.phone || '';
    document.getElementById('jobTitle').value = userProfile.jobTitle || '';
    document.getElementById('company').value = userProfile.company || '';
}

// Load user settings
function loadUserSettings() {
    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const userKey = userData.email || 'default';
    userSettings = JSON.parse(localStorage.getItem(`settings_${userKey}`) || '{}');
    
    // Apply loaded settings
    applySettings();
}

// Apply settings to UI
function applySettings() {
    // Notification settings
    document.getElementById('lowBalanceAlert').checked = userSettings.lowBalanceAlert !== false;
    document.getElementById('highExpenseAlert').checked = userSettings.highExpenseAlert !== false;
    document.getElementById('lowRevenueAlert').checked = userSettings.lowRevenueAlert || false;
    document.getElementById('budgetExceedAlert').checked = userSettings.budgetExceedAlert !== false;
    document.getElementById('systemUpdates').checked = userSettings.systemUpdates !== false;
    document.getElementById('periodicReports').checked = userSettings.periodicReports !== false;
    document.getElementById('securityNotifications').checked = userSettings.securityNotifications !== false;
    document.getElementById('usageTips').checked = userSettings.usageTips || false;
    
    // Thresholds
    document.getElementById('lowBalanceThreshold').value = userSettings.lowBalanceThreshold || 1000;
    document.getElementById('expenseThreshold').value = userSettings.expenseThreshold || 20;
    document.getElementById('reportFrequency').value = userSettings.reportFrequency || 'weekly';
    
    // Display settings
    document.getElementById('colorScheme').value = userSettings.colorScheme || 'default';
    document.getElementById('fontSize').value = userSettings.fontSize || 'medium';
    document.getElementById('displayMode').value = userSettings.displayMode || 'light';
    document.getElementById('showWelcomeMessage').checked = userSettings.showWelcomeMessage !== false;
    document.getElementById('showQuickStats').checked = userSettings.showQuickStats !== false;
    document.getElementById('showRecentActivity').checked = userSettings.showRecentActivity !== false;
    document.getElementById('compactView').checked = userSettings.compactView || false;
    document.getElementById('itemsPerPage').value = userSettings.itemsPerPage || 25;
    
    // Security settings
    document.getElementById('twoFactorAuth').checked = userSettings.twoFactorAuth || false;
    document.getElementById('loginNotifications').checked = userSettings.loginNotifications !== false;
    document.getElementById('sessionTimeout').checked = userSettings.sessionTimeout !== false;
    
    // Backup settings
    document.getElementById('autoBackup').checked = userSettings.autoBackup !== false;
    document.getElementById('backupFrequency').value = userSettings.backupFrequency || 'daily';
}

// Setup event listeners
function setupEventListeners() {
    // Profile form
    document.getElementById('profileForm').addEventListener('submit', function(e) {
        e.preventDefault();
        saveProfile();
    });
    
    // Security form
    document.getElementById('securityForm').addEventListener('submit', function(e) {
        e.preventDefault();
        updatePassword();
    });
    
    // Real-time settings save
    const settingsInputs = document.querySelectorAll('input[type="checkbox"], select');
    settingsInputs.forEach(input => {
        input.addEventListener('change', autoSaveSettings);
    });
}

// Setup password strength checker
function setupPasswordStrengthChecker() {
    const newPasswordField = document.getElementById('newPassword');
    newPasswordField.addEventListener('input', function() {
        const password = this.value;
        if (password.length > 0) {
            document.getElementById('passwordStrength').classList.remove('hidden');
            updatePasswordStrength(password);
        } else {
            document.getElementById('passwordStrength').classList.add('hidden');
        }
    });
}

// Update password strength indicator
function updatePasswordStrength(password) {
    let score = 0;
    let feedback = [];
    
    // Length check
    if (password.length >= 8) score += 1;
    else feedback.push('8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
    
    // Uppercase check
    if (/[A-Z]/.test(password)) score += 1;
    else feedback.push('Ø­Ø±Ù ÙƒØ¨ÙŠØ±');
    
    // Lowercase check
    if (/[a-z]/.test(password)) score += 1;
    else feedback.push('Ø­Ø±Ù ØµØºÙŠØ±');
    
    // Number check
    if (/\d/.test(password)) score += 1;
    else feedback.push('Ø±Ù‚Ù…');
    
    // Special character check
    if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) score += 1;
    else feedback.push('Ø±Ù…Ø² Ø®Ø§Øµ');
    
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');
    
    const percentage = (score / 5) * 100;
    strengthBar.style.width = percentage + '%';
    
    let color, text;
    if (score <= 2) {
        color = 'bg-red-500';
        text = 'Ø¶Ø¹ÙŠÙØ©';
    } else if (score <= 3) {
        color = 'bg-yellow-500';
        text = 'Ù…ØªÙˆØ³Ø·Ø©';
    } else if (score <= 4) {
        color = 'bg-blue-500';
        text = 'Ø¬ÙŠØ¯Ø©';
    } else {
        color = 'bg-green-500';
        text = 'Ù‚ÙˆÙŠØ© Ø¬Ø¯Ø§Ù‹';
    }
    
    strengthBar.className = `h-2 rounded-full transition-all duration-300 ${color}`;
    strengthText.textContent = `${text}${feedback.length > 0 ? ' - Ù…Ø·Ù„ÙˆØ¨: ' + feedback.join(', ') : ''}`;
}

// Save profile
function saveProfile() {
    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const userKey = userData.email || 'default';
    
    const profileData = {
        fullname: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        jobTitle: document.getElementById('jobTitle').value,
        company: document.getElementById('company').value,
        lastUpdated: new Date().toISOString()
    };
    
    // Update current user data
    const updatedUser = { ...userData, ...profileData };
    localStorage.setItem('currentUser', JSON.stringify(updatedUser));
    localStorage.setItem(`profile_${userKey}`, JSON.stringify(profileData));
    
    showNotification('ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø¨Ù†Ø¬Ø§Ø­! âœ…', 'success');
    
    // Update header name if changed
    document.getElementById('headerUserName').textContent = profileData.fullname;
}

// Update password
function updatePassword() {
    const currentPassword = document.getElementById('currentPassword').value;
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (!currentPassword) {
        showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©', 'error');
        return;
    }
    
    if (!newPassword) {
        showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©', 'error');
        return;
    }
    
    if (newPassword !== confirmPassword) {
        showNotification('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©', 'error');
        return;
    }
    
    if (newPassword.length < 8) {
        showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
        return;
    }
    
    // Simulate password update
    showLoadingOverlay(true);
    setTimeout(() => {
        showLoadingOverlay(false);
        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­! ğŸ”', 'success');
        
        // Clear password fields
        document.getElementById('currentPassword').value = '';
        document.getElementById('newPassword').value = '';
        document.getElementById('confirmPassword').value = '';
        document.getElementById('passwordStrength').classList.add('hidden');
        
        // Save security settings
        saveSecuritySettings();
    }, 1500);
}

// Auto-save settings
function autoSaveSettings() {
    setTimeout(saveAllSettings, 500); // Debounce
}

// Save all settings
function saveAllSettings() {
    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const userKey = userData.email || 'default';
    
    userSettings = {
        // Notification settings
        lowBalanceAlert: document.getElementById('lowBalanceAlert').checked,
        highExpenseAlert: document.getElementById('highExpenseAlert').checked,
        lowRevenueAlert: document.getElementById('lowRevenueAlert').checked,
        budgetExceedAlert: document.getElementById('budgetExceedAlert').checked,
        systemUpdates: document.getElementById('systemUpdates').checked,
        periodicReports: document.getElementById('periodicReports').checked,
        securityNotifications: document.getElementById('securityNotifications').checked,
        usageTips: document.getElementById('usageTips').checked,
        
        // Thresholds
        lowBalanceThreshold: parseInt(document.getElementById('lowBalanceThreshold').value),
        expenseThreshold: parseInt(document.getElementById('expenseThreshold').value),
        reportFrequency: document.getElementById('reportFrequency').value,
        
        // Display settings
        colorScheme: document.getElementById('colorScheme').value,
        fontSize: document.getElementById('fontSize').value,
        displayMode: document.getElementById('displayMode').value,
        showWelcomeMessage: document.getElementById('showWelcomeMessage').checked,
        showQuickStats: document.getElementById('showQuickStats').checked,
        showRecentActivity: document.getElementById('showRecentActivity').checked,
        compactView: document.getElementById('compactView').checked,
        itemsPerPage: parseInt(document.getElementById('itemsPerPage').value),
        
        // Security settings
        twoFactorAuth: document.getElementById('twoFactorAuth').checked,
        loginNotifications: document.getElementById('loginNotifications').checked,
        sessionTimeout: document.getElementById('sessionTimeout').checked,
        
        // Backup settings
        autoBackup: document.getElementById('autoBackup').checked,
        backupFrequency: document.getElementById('backupFrequency').value,
        
        lastUpdated: new Date().toISOString()
    };
    
    localStorage.setItem(`settings_${userKey}`, JSON.stringify(userSettings));
}

// Save notification settings
function saveNotificationSettings() {
    saveAllSettings();
    showNotification('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ””', 'success');
}

// Save display settings
function saveDisplaySettings() {
    saveAllSettings();
    applyDisplaySettings();
    showNotification('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­! ğŸ¨', 'success');
}

// Apply display settings to current page
function applyDisplaySettings() {
    const colorScheme = document.getElementById('colorScheme').value;
    const fontSize = document.getElementById('fontSize').value;
    const displayMode = document.getElementById('displayMode').value;
    
    // Apply color scheme
    document.body.setAttribute('data-color-scheme', colorScheme);
    
    // Apply font size
    document.body.setAttribute('data-font-size', fontSize);
    
    // Apply display mode
    if (displayMode === 'dark') {
        document.body.classList.add('dark-mode');
    } else {
        document.body.classList.remove('dark-mode');
    }
}

// Save security settings
function saveSecuritySettings() {
    saveAllSettings();
    showNotification('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­! ğŸ”', 'success');
}

// Load usage statistics
function loadUsageStatistics() {
    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const userKey = userData.email || 'default';
    
    // Get operations count
    const operations = JSON.parse(localStorage.getItem('operations') || '[]');
    document.getElementById('totalOperations').textContent = operations.length;
    
    // Get accounts count
    const accounts = JSON.parse(localStorage.getItem(`accounts_${userKey}`) || '[]');
    document.getElementById('totalAccounts').textContent = accounts.length;
    
    // Calculate data usage (simplified)
    const dataSize = JSON.stringify(localStorage).length;
    const sizeInKB = (dataSize / 1024).toFixed(2);
    document.getElementById('dataUsage').textContent = `${sizeInKB} KB`;
    
    // Set account creation date
    const profileData = JSON.parse(localStorage.getItem(`profile_${userKey}`) || '{}');
    const createdDate = profileData.accountCreated || '1 ÙŠÙ†Ø§ÙŠØ± 2024';
    document.getElementById('accountCreated').textContent = createdDate;
    
    // Set last login
    const lastLogin = new Date().toLocaleDateString('ar-SA');
    document.getElementById('lastLogin').textContent = lastLogin;
}

// Update system info
function updateSystemInfo() {
    // Browser info
    const browserInfo = `${navigator.userAgent.split(' ').slice(-1)[0]}`;
    document.getElementById('browserInfo').textContent = browserInfo;
}

// Export data functions
function exportData(type) {
    showLoadingOverlay(true);
    
    setTimeout(() => {
        const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
        const userKey = userData.email || 'default';
        let data, filename;
        
        switch(type) {
            case 'operations':
                data = JSON.parse(localStorage.getItem('operations') || '[]');
                filename = 'financial-operations.json';
                break;
            case 'accounts':
                data = JSON.parse(localStorage.getItem(`accounts_${userKey}`) || '[]');
                filename = 'bank-accounts.json';
                break;
            case 'all':
                data = {
                    profile: JSON.parse(localStorage.getItem(`profile_${userKey}`) || '{}'),
                    settings: JSON.parse(localStorage.getItem(`settings_${userKey}`) || '{}'),
                    operations: JSON.parse(localStorage.getItem('operations') || '[]'),
                    accounts: JSON.parse(localStorage.getItem(`accounts_${userKey}`) || '[]'),
                    exportDate: new Date().toISOString()
                };
                filename = 'complete-user-data.json';
                break;
        }
        
        downloadJSON(data, filename);
        showLoadingOverlay(false);
        showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ“¥', 'success');
    }, 1000);
}

// Create backup
function createBackup() {
    exportData('all');
    showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸ’¾', 'success');
}

// Download JSON data
function downloadJSON(data, filename) {
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);
}

// Reset all data
function resetAllData() {
    showConfirmModal(
        'ØªØ£ÙƒÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†',
        'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!',
        function() {
            const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const userKey = userData.email || 'default';
            
            // Remove user-specific data
            localStorage.removeItem('operations');
            localStorage.removeItem(`accounts_${userKey}`);
            localStorage.removeItem(`settings_${userKey}`);
            localStorage.removeItem(`profile_${userKey}`);
            localStorage.removeItem('userAlerts');
            
            showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'info');
            
            // Reload page to reset everything
            setTimeout(() => {
                window.location.reload();
            }, 2000);
        }
    );
}

// Check for updates
function checkForUpdates() {
    showLoadingOverlay(true);
    
    setTimeout(() => {
        showLoadingOverlay(false);
        showNotification('Ù†Ø¸Ø§Ù…Ùƒ Ù…Ø­Ø¯Ø« Ø¥Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±! âœ…', 'success');
    }, 2000);
}

// Download user data
function downloadUserData() {
    exportData('all');
}

// Contact support
function contactSupport() {
    window.location.href = 'support.html';
}

// Logout
function logout() {
    showConfirmModal(
        'ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
        'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ',
        function() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('currentSession');
            window.location.href = 'index.html';
        }
    );
}

// Refresh settings
function refreshSettings() {
    showLoadingOverlay(true);
    
    setTimeout(() => {
        loadUserData();
        loadUserSettings();
        loadUsageStatistics();
        showLoadingOverlay(false);
        showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ”„', 'success');
    }, 1000);
}

// Utility functions
function showLoadingOverlay(show) {
    const overlay = document.getElementById('loadingOverlay');
    if (show) {
        overlay.classList.remove('hidden');
    } else {
        overlay.classList.add('hidden');
    }
}

function showConfirmModal(title, message, onConfirm) {
    document.getElementById('confirmTitle').textContent = title;
    document.getElementById('confirmMessage').textContent = message;
    document.getElementById('confirmButton').onclick = function() {
        onConfirm();
        closeConfirmModal();
    };
    document.getElementById('confirmModal').classList.remove('hidden');
}

function closeConfirmModal() {
    document.getElementById('confirmModal').classList.add('hidden');
}

function showNotification(message, type = 'info') {
    let container = document.getElementById('notification-container');
    if (!container) {
        container = document.createElement('div');
        container.id = 'notification-container';
        container.className = 'fixed top-4 left-4 z-50 space-y-2';
        document.body.appendChild(container);
    }
    
    const notification = document.createElement('div');
    const typeClasses = {
        'success': 'bg-green-500 text-white',
        'error': 'bg-red-500 text-white',
        'warning': 'bg-yellow-500 text-black',
        'info': 'bg-blue-500 text-white'
    };
    
    notification.className = `p-4 rounded-lg shadow-lg transform transition-all duration-300 ${typeClasses[type]} max-w-sm opacity-0 translate-x-full`;
    notification.innerHTML = `
        <div class="flex items-center justify-between">
            <span>${message}</span>
            <button onclick="this.parentElement.parentElement.remove()" class="mr-2 text-lg hover:text-gray-200">&times;</button>
        </div>
    `;
    
    container.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.classList.remove('opacity-0', 'translate-x-full');
    }, 100);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentElement) {
            notification.classList.add('opacity-0', 'translate-x-full');
            setTimeout(() => notification.remove(), 300);
        }
    }, 5000);
}

// Export functions for global access
window.saveNotificationSettings = saveNotificationSettings;
window.saveDisplaySettings = saveDisplaySettings;
window.exportData = exportData;
window.createBackup = createBackup;
window.resetAllData = resetAllData;
window.checkForUpdates = checkForUpdates;
window.downloadUserData = downloadUserData;
window.contactSupport = contactSupport;
window.logout = logout;
window.refreshSettings = refreshSettings;
window.closeConfirmModal = closeConfirmModal;
</script>

<!-- Custom CSS for toggle switches -->
<style>
.toggle-switch {
    appearance: none;
    width: 50px;
    height: 24px;
    background: #ddd;
    border-radius: 12px;
    position: relative;
    cursor: pointer;
    transition: background-color 0.3s;
}

.toggle-switch:checked {
    background: #4F46E5;
}

.toggle-switch::before {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: white;
    top: 2px;
    left: 2px;
    transition: transform 0.3s;
}

.toggle-switch:checked::before {
    transform: translateX(26px);
}

/* Dark mode styles */
.dark-mode {
    background-color: #1f2937;
    color: #f9fafb;
}

.dark-mode .bg-white {
    background-color: #374151 !important;
}

.dark-mode .text-gray-800 {
    color: #f9fafb !important;
}

.dark-mode .text-gray-700 {
    color: #d1d5db !important;
}

.dark-mode .border {
    border-color: #4b5563 !important;
}

/* Color scheme variations */
[data-color-scheme="green"] .bg-indigo-600 {
    background-color: #059669 !important;
}

[data-color-scheme="purple"] .bg-indigo-600 {
    background-color: #7c3aed !important;
}

[data-color-scheme="red"] .bg-indigo-600 {
    background-color: #dc2626 !important;
}

/* Font size variations */
[data-font-size="small"] {
    font-size: 14px;
}

[data-font-size="large"] {
    font-size: 18px;
}
</style>

</body>
</html>
